var sw=self;sw.addEventListener("push",(function(t){var e,n=null===(e=t.data)||void 0===e?void 0:e.json();if(n){var i=n.title,a=n.body,r=n.icon,o={url:n.url};t.waitUntil(sw.registration.showNotification(i,{body:a,icon:r,data:o}))}}));var targetClient=null,targetUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var e=sw.clients;t.waitUntil(e.matchAll({type:"window"}).then((function(n){var i=t.notification.data||{},a=targetUrl=sw.location.origin+i.url||"";function r(t){return t&&t.focus?t.focus():Promise.resolve(null)}function o(t){return t&&t.navigate?t.navigate(a):Promise.resolve(null)}for(var l=function(t){var e=n[t];if(e.url===a)return{value:r(e).then(o).then((function(){return function(t){var e;return null===(e=t.postMessage)||void 0===e||e.call(t,{type:"notification-click",url:a}),Promise.resolve(t)}(e)}))}},s=0;s<n.length;s++){var u=l(s);if("object"==typeof u)return u.value}return e.openWindow(a).then(r)})))})),sw.addEventListener("message",(function(t){var e;console.log("message From Service Worker: "+JSON.stringify(t.data)),postMessage({type:"message",data:t.data,url:targetUrl}),null===(e=null==targetClient?void 0:targetClient.postMessage)||void 0===e||e.call(targetClient,{type:"message",data:t.data,url:targetUrl})}));
var sw=self;sw.addEventListener("push",(function(t){var r,i=null===(r=t.data)||void 0===r?void 0:r.json();if(i){var n=i.title,e=i.body,a=i.icon,l={url:i.url};t.waitUntil(sw.registration.showNotification(n,{body:e,icon:a,data:l}))}}));var targetUrl="",targetClientUrl="",targetOriginUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var r=sw.clients;t.waitUntil(r.matchAll({type:"window"}).then((function(i){for(var n=t.notification.data||{},e=sw.location.origin+n.url||"",a=0;a<i.length;a++){var l=i[a];if(l.focus&&l.url===e)return targetClientUrl=l.url,l.focus()}return r.openWindow(e)})))})),sw.addEventListener("message",(function(t){var r=t.source;r&&targetUrl&&(r.postMessage({type:"navigation",url:targetUrl,targetClientUrl:targetClientUrl,targetOriginUrl:targetOriginUrl}),targetUrl="",targetClientUrl="",targetOriginUrl="")}));
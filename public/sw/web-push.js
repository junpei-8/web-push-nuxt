var sw=self;sw.addEventListener("push",(function(t){var e,n=null===(e=t.data)||void 0===e?void 0:e.json();if(n){var r=n.title,i=n.body,o=n.icon,l={url:n.url};t.waitUntil(sw.registration.showNotification(r,{body:i,icon:o,data:l}))}}));var targetUrl="",targetClientUrl="",targetOriginUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var e=sw.clients;t.waitUntil(e.matchAll({type:"window"}).then((function(n){var r=t.notification.data||{},i=sw.location.origin,o=i+r.url||"";console.log("matchedClients",n),setTimeout((function(){console.log("matchedClients",n),console.log("url: ",o),console.log("originUrl: ",i)}),2e3);for(var l=function(t){var e=n[t];if(setTimeout((function(){return console.log("client: : ",e)}),2e3),e.url===o)return targetClientUrl=e.url,{value:e.focus?e.focus():Promise.resolve(null)}},a=0;a<n.length;a++){var s=l(a);if("object"==typeof s)return s.value}return setTimeout((function(){return console.log("openWindow: ",targetClientUrl)}),2e3),e.openWindow(o)})))})),sw.addEventListener("message",(function(t){var e=t.source;console.log("on message, target url: ",targetUrl),e&&targetUrl&&(e.postMessage({type:"navigation",url:targetUrl,targetClientUrl:targetClientUrl,targetOriginUrl:targetOriginUrl}),targetUrl="",targetClientUrl="",targetOriginUrl="")}));
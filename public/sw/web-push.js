var sw=self;sw.addEventListener("push",(function(n){var t,e=null===(t=n.data)||void 0===t?void 0:t.json();if(e){var i=e.title,o=e.body,r=e.icon,a={url:e.url};n.waitUntil(sw.registration.showNotification(i,{body:o,icon:r,data:a}))}})),sw.addEventListener("notificationclick",(function(n){n.notification.close();var t=sw.clients;n.waitUntil(t.matchAll({type:"window"}).then((function(e){var i=n.notification.data||{},o=sw.location.origin+i.url||"";function r(n){return n&&n.focus?n.focus():Promise.resolve(null)}function a(n){return n&&n.navigate?n.navigate(o):Promise.resolve(null)}function c(n,t){return setTimeout((function(){var e;null===(e=n.postMessage)||void 0===e||e.call(n,{type:"notification-click",url:o,message:t}),Promise.resolve(n)}),2e3),Promise.resolve(n)}for(var l=function(n){var t=e[n];if(t.url===o){try{c(t,"searched client")}catch(n){}return{value:r(t).then(a).then((function(){return c(t)}))}}},u=0;u<e.length;u++){var s=l(u);if("object"==typeof s)return s.value}return t.openWindow(o).then((function(n){if(!n)return null;try{c(n,"searched client")}catch(n){}return n})).then(r)})))}));
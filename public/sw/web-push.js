var sw=self;sw.addEventListener("push",(function(t){var n,e=null===(n=t.data)||void 0===n?void 0:n.json();if(e){var o=e.title,i=e.body,r=e.icon,l={url:e.url};t.waitUntil(sw.registration.showNotification(o,{body:i,icon:r,data:l}))}}));var targetUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var n=sw.clients;t.waitUntil(n.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){var o=e.length,i=t.notification.data||{},r=sw.location.origin+i.url||"";function l(t){return t.focus?(targetUrl=r,t.postMessage({type:"navigation",url:r}),console.log("client1: ",t),setTimeout((function(){return console.log("client2: ",t)}),2e3),t.focus()):Promise.resolve(null)}if(!o)return n.openWindow(r);for(var a=function(t){var n=e[t];setTimeout((function(){return console.log("client: ",n)}),2e3),n.url===r&&l(n)},s=0;s<o;s++)a(s);return l(e[0])})))})),sw.addEventListener("message",(function(t){var n=t.source;console.log("on message, target url: ",targetUrl),n&&targetUrl&&(n.postMessage({type:"navigation",url:targetUrl}),targetUrl="")}));
var sw=self;sw.addEventListener("push",(function(t){var n,e=null===(n=t.data)||void 0===n?void 0:n.json();if(e){var i=e.title,o=e.body,r=e.icon,a={url:e.url};t.waitUntil(sw.registration.showNotification(i,{body:o,icon:r,data:a}))}}));var lastUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var n=sw.clients;t.waitUntil(n.matchAll({type:"window"}).then((function(e){var i=t.notification.data||{},o=lastUrl=sw.location.origin+i.url||"";function r(t){return t&&t.focus?t.focus():Promise.resolve(null)}function a(t){return t&&t.navigate?t.navigate(o):Promise.resolve(null)}for(var s=function(t){var n=e[t];if(n.url===o)return{value:r(n).then(a).then((function(){return function(t){var n;return null===(n=t.postMessage)||void 0===n||n.call(t,{type:"notification-click",url:o}),Promise.resolve(t)}(n)}))}},l=0;l<e.length;l++){var u=s(l);if("object"==typeof u)return u.value}return n.openWindow(o).then(r)})))})),sw.addEventListener("message",(function(t){console.log("message From Service Worker: "+JSON.stringify(t.data)),postMessage({type:"message",data:t.data,url:lastUrl})}));
var sw=self;sw.addEventListener("push",(function(t){var r,i=null===(r=t.data)||void 0===r?void 0:r.json();if(i){var n=i.title,e=i.body,l=i.icon,o={url:i.url};t.waitUntil(sw.registration.showNotification(n,{body:e,icon:l,data:o}))}}));var targetUrl="",targetClientUrl="",targetOriginUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var r=sw.clients;t.waitUntil(r.matchAll({type:"window"}).then((function(i){var n=t.notification.data||{},e=sw.location.origin,l=e+n.url||"";console.log("url: ",l),console.log("originUrl: ",e);for(var o=0;o<i.length;o++){var a=i[o];if(console.log("client: ",a),a.focus&&a.url===l)return targetClientUrl=a.url,a.focus()}return r.openWindow(l)})))})),sw.addEventListener("message",(function(t){var r=t.source;console.log("on message, target url: ",targetUrl),r&&targetUrl&&(r.postMessage({type:"navigation",url:targetUrl,targetClientUrl:targetClientUrl,targetOriginUrl:targetOriginUrl}),targetUrl="",targetClientUrl="",targetOriginUrl="")}));
var sw=self;console.log("load sw"),sw.addEventListener("push",(function(t){var i,n=null===(i=t.data)||void 0===i?void 0:i.json();if(n){var o=n.title,a=n.body,r=n.icon,e={url:n.url};t.waitUntil(sw.registration.showNotification(o,{body:a,icon:r,data:e}))}}));var targetUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var i=sw.clients;t.waitUntil(i.matchAll({type:"window"}).then((function(n){for(var o=t.notification.data||{},a=sw.location.origin,r=a+o.url||"",e=0;e<n.length;e++){var s=n[e];if(s.focus&&s.url.startsWith(a))return s.focus()}return i.openWindow(r)})))})),sw.addEventListener("message",(function(t){var i;t.source&&targetUrl&&(null===(i=t.source)||void 0===i||i.postMessage({type:"navigation",url:targetUrl}),targetUrl="")}));
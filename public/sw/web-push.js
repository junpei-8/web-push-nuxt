var sw=self;sw.addEventListener("push",(function(n){var t,i=null===(t=n.data)||void 0===t?void 0:t.json();if(i){var e=i.title,o=i.body,r=i.icon,a={url:i.url};n.waitUntil(sw.registration.showNotification(e,{body:o,icon:r,data:a}))}})),sw.addEventListener("notificationclick",(function(n){n.notification.close();var t=sw.clients;n.waitUntil(t.matchAll({type:"window"}).then((function(i){var e=n.notification.data||{},o=sw.location.origin+e.url||"";function r(n){return n&&n.focus?n.focus():Promise.resolve(null)}function a(n){return n&&n.navigate?n.navigate(o):Promise.resolve(null)}function c(n,t){var i;return null===(i=n.postMessage)||void 0===i||i.call(n,{type:"notification-click",url:o,message:t}),Promise.resolve(n)}for(var l=function(n){var t=i[n];if(t.url===o){try{c(t,"searched client")}catch(n){}return{value:r(t).then(a).then((function(){return c(t)}))}}},u=0;u<i.length;u++){var s=l(u);if("object"==typeof s)return s.value}return t.openWindow(o).then((function(n){if(!n)return null;try{c(n,"searched client")}catch(n){}return n})).then(r)})))}));
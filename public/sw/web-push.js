var sw=self;sw.addEventListener("push",(function(t){var n,e=null===(n=t.data)||void 0===n?void 0:n.json();if(e){var r=e.title,i=e.body,o=e.icon,l={url:e.url};t.waitUntil(sw.registration.showNotification(r,{body:i,icon:o,data:l}))}}));var targetUrl="",targetClientUrl="",targetOriginUrl="";sw.addEventListener("notificationclick",(function(t){t.notification.close();var n=sw.clients;t.waitUntil(n.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){var r=e.length,i=t.notification.data||{},o=sw.location.origin,l=o+i.url||"";function a(t){return t.focus?(targetUrl=l,t.focus()):Promise.resolve(null)}if(console.log("matchedClients",e),setTimeout((function(){console.log("matchedClients",e),console.log("url: ",l),console.log("originUrl: ",o)}),2e3),!r)return n.openWindow(l);for(var s=function(t){var n=e[t];setTimeout((function(){return console.log("client: : ",n)}),2e3),n.url===l&&a(n)},c=0;c<r;c++)s(c);return a(e[0])})))})),sw.addEventListener("message",(function(t){var n=t.source;console.log("on message, target url: ",targetUrl),n&&targetUrl&&(n.postMessage({type:"navigation",url:targetUrl,targetClientUrl:targetClientUrl,targetOriginUrl:targetOriginUrl}),targetUrl="",targetClientUrl="",targetOriginUrl="")}));